<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Third Voice</title>
  <style>
    /* CSS: Mobile-first, calming design */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      background-color: #f5f6fa;
      color: #333;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.8rem;
      color: #4a4a8c;
      text-align: center;
      margin-bottom: 20px;
    }
    h2 {
      font-size: 1.4rem;
      color: #4a4a8c;
      margin-top: 30px;
    }
    p {
      font-size: 1rem;
      margin-bottom: 15px;
    }
    .app {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }
    textarea {
      width: 100%;
      height: 120px;
      padding: 10px;
      border: 1px solid #d3d3f3;
      border-radius: 8px;
      font-size: 1rem;
      resize: none;
      margin-bottom: 15px;
    }
    .tone-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }
    .tone-btn {
      flex: 1;
      padding: 10px;
      background-color: #e6e6fa;
      color: #4a4a8c;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .tone-btn:hover, .tone-btn.active {
      background-color: #b3b3e0;
      color: #fff;
    }
    .rewrite-btn {
      width: 100%;
      padding: 12px;
      background-color: #4a90e2;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .rewrite-btn:hover {
      background-color: #357abd;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background-color: #f0faff;
      border-radius: 8px;
      display: none;
    }
    .result h3 {
      font-size: 1.2rem;
      color: #4a4a8c;
      margin-bottom: 10px;
    }
    .tone-analysis, .suggestion {
      font-size: 0.95rem;
      color: #666;
      margin-top: 10px;
    }
    .section {
      margin-bottom: 30px;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    input, textarea.feedback {
      padding: 10px;
      border: 1px solid #d3d3f3;
      border-radius: 8px;
      font-size: 1rem;
    }
    button[type="submit"] {
      padding: 12px;
      background-color: #4a90e2;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
    }
    button[type="submit"]:hover {
      background-color: #357abd;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      padding-top: 20px;
      border-top: 1px solid #d3d3f3;
    }
    footer a {
      color: #4a90e2;
      text-decoration: none;
    }
    @media (min-width: 600px) {
      h1 {
        font-size: 2.2rem;
      }
      .tone-btn {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Main App -->
    <h1>The Third Voice</h1>
    <div class="app">
      <textarea id="messageInput" placeholder="Paste or type your message here..."></textarea>
      <div class="tone-selector">
        <button class="tone-btn" data-tone="Kind">Kind</button>
        <button class="tone-btn" data-tone="Direct">Direct</button>
        <button class="tone-btn" data-tone="Honest">Honest</button>
        <button class="tone-btn" data-tone="Empathetic">Empathetic</button>
      </div>
      <button class="rewrite-btn" id="rewriteBtn">Rewrite It</button>
      <div class="result" id="result">
        <h3>Rewritten Message</h3>
        <p id="rewrittenMessage"></p>
        <div class="tone-analysis" id="toneAnalysis"></div>
        <div class="suggestion" id="suggestion"></div>
      </div>
    </div>

    <!-- Privacy Notice -->
    <div class="section">
      <h2>Privacy Notice</h2>
      <p>We never store your messages. Everything happens in real time and stays on your device.</p>
    </div>

    <!-- Feedback Form -->
    <!-- Insert your Formspree Form ID in the 'action' attribute below -->
    <div class="section">
      <h2>Feedback</h2>
      <form action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
        <input type="email" name="email" placeholder="Your email (optional)" />
        <textarea class="feedback" name="message" placeholder="Your feedback..." rows="4"></textarea>
        <button type="submit">Send Feedback</button>
      </form>
    </div>

    <!-- About Section -->
    <div class="section">
      <h2>About The Third Voice</h2>
      <p>Created by Predrag Mirkovic from an immigration detention center using only a phone, The Third Voice is an emotionally intelligent AI assistant designed to prevent love from breaking down due to miscommunication. Our mission is to help you express yourself clearly and kindly, fostering understanding in your most important relationships.</p>
    </div>

    <!-- Disclaimer -->
    <div class="section">
      <h2>Disclaimer</h2>
      <p>The Third Voice is not a substitute for therapy, legal advice, or crisis services. If you are in crisis, please seek professional help immediately.</p>
    </div>

    <!-- Footer -->
    <footer>
      <p>Contact: <a href="mailto:hello@thethirdvoice.ai">hello@thethirdvoice.ai</a></p>
      <p>Website: <a href="https://www.thethirdvoice.ai">www.thethirdvoice.ai</a></p>
      <p>Hashtag: <a href="https://x.com/hashtag/TheThirdVoice">#TheThirdVoice</a></p>
      <p>&copy; 2025 The Third Voice</p>
    </footer>
  </div>

  <script>
    // JavaScript: Handle UI interactions and API call
    const messageInput = document.getElementById('messageInput');
    const rewriteBtn = document.getElementById('rewriteBtn');
    const resultDiv = document.getElementById('result');
    const rewrittenMessage = document.getElementById('rewrittenMessage');
    const toneAnalysis = document.getElementById('toneAnalysis');
    const suggestion = document.getElementById('suggestion');
    const toneButtons = document.querySelectorAll('.tone-btn');
    let selectedTone = 'Kind';

    // Tone selector logic
    toneButtons.forEach(button => {
      button.addEventListener('click', () => {
        toneButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        selectedTone = button.dataset.tone;
      });
    });

    // Rewrite button click handler
    rewriteBtn.addEventListener('click', async () => {
      const message = messageInput.value.trim();
      if (!message) {
        alert('Please enter a message.');
        return;
      }

      // Show loading state
      rewriteBtn.textContent = 'Rewriting...';
      rewriteBtn.disabled = true;

      try {
        // <!-- API CALL -->
        // Insert your Hugging Face API endpoint and key below
        const API_ENDPOINT = 'YOUR_HUGGING_FACE_API_ENDPOINT';
        const API_KEY = 'YOUR_HUGGING_FACE_API_KEY';

        const response = await fetch(API_ENDPOINT, {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${API_KEY}`,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            message: message,
            tone: selectedTone.toLowerCase(),
          }),
        });

        if (!response.ok) throw new Error('API request failed');

        const data = await response.json();

        // Display results
        rewrittenMessage.textContent = data.rewritten_message || 'No rewrite provided.';
        toneAnalysis.textContent = `Original Tone: ${data.original_tone || 'Neutral'} | Rewritten Tone: ${data.rewritten_tone || selectedTone}`;
        suggestion.textContent = data.suggestion || 'This message seems ready to send, but consider your recipientâ€™s perspective.';
        resultDiv.style.display = 'block';
      } catch (error) {
        console.error('Error:', error);
        rewrittenMessage.textContent = 'Sorry, something went wrong. Please try again.';
        resultDiv.style.display = 'block';
      } finally {
        rewriteBtn.textContent = 'Rewrite It';
        rewriteBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
